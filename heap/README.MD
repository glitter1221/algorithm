# Heap

자료구조 ‘힙(heap)’이란?
완전 이진 트리의 일종으로 우선순위 큐를 위하여 만들어진 자료구조이다.
여러 개의 값들 중에서 최댓값이나 최솟값을 빠르게 찾아내도록 만들어진 자료구조이며, 일종의 반정렬 상태(느슨한 정렬 상태) 를 유지한다.

부모 노드의 키 값이 자식 노드의 키 값보다 항상 큰(작은) 이진 트리를 말한다.
또한 힙 트리에서는 중복된 값을 허용한다. (이진 탐색 트리에서는 중복된 값을 허용하지 않는다.)



![heap1](./images/heap1-min.JPG)



최대 힙(max heap)
부모 노드의 키 값이 자식 노드의 키 값보다 크거나 같은 완전 이진 트리
key(부모 노드) >= key(자식 노드)



![heap2](./images/heap2-min.JPG)



최소 힙(min heap)
부모 노드의 키 값이 자식 노드의 키 값보다 작거나 같은 완전 이진 트리
key(부모 노드) <= key(자식 노드)



![heap3](./images/heap3-min.JPG)



힙을 구현하는 표준적인 방법은 배열이고, 그 배열에서의 부모 노드와 자식 노드간의 관계는 다음과 같다.
왼쪽 자식의 인덱스 = 부모 노드의 인덱스 * 2
오른쪽 자식의 인덱스 = (부모 노드의 인덱스 * 2) + 1 
부모의 인덱스 = 자식의 인덱스 / 2



![heap4](./images/heap4-min.JPG)



힙의 삽입
힙에 새로운 요소가 들어오면, 일단 새로운 노드를 힙의 마지막 노드에 이어서 삽입한다.
새로운 노드를 부모 노드들과 교환해서 힙의 성질을 만족시킨다.
아래의 최대 힙(max heap)에 새로운 요소 8을 삽입해보자.



![heap5](./images/heap5-min.JPG)



인덱스 순으로 가장 마지막 위치인 11에 새로운 요소 8 삽입



![heap6](./images/heap6-min.JPG)



부모 노드 4 < 자식 노드 8이므로 서로 교환



![heap7](./images/heap7-min.JPG)



부모 노드 7 < 자식 노드 8이므로 서로 교환



![heap8](./images/heap8-min.JPG)



부모 노드 9 > 자식 노드 8이므로 그대로 유지



![heap9](./images/heap9-min.JPG)



힙의 삭제
최소 힙에서 삭제 연산은 최소값은 루트 노드이므로 루트 노드가 삭제된다.
(최대 힙에서 삭제 연산은 최대값을 가진 루트 노드를 삭제하는 것이다.)
삭제된 루트 노드에는 힙의 마지막 노드를 가져온다.
힙을 재구성한다.
아래의 최소 힙에서 최소값을 삭제해보자.



![heap10](./images/heap10-min.JPG)



최소값인 루트 노드를 삭제, 빈자리엔 마지막 노드를 가져온다.



![heap11](./images/heap11-min.JPG)



두 자식 노드 중 크기가 작은 자식 노드와 비교한다.
(최대 힙에서는 크기가 더 큰 자식 노드와 비교한다.)
부모 노드 9 > 오른쪽 자식 노드 2이므로 오른쪽 자식 노드와 교환한다.



![heap12](./images/heap12-min.JPG)



부모 노드 9 > 왼쪽 자식 노드 3이므로 왼쪽 자식 노드와 교환한다.